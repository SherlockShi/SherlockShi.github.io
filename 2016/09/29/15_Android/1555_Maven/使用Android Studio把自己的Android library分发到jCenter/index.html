<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用Android Studio把自己的Android library分发到JCenter | SherlockShi&#39;s Home | Don&#39;t be evil.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#3F51B5">
  
  
  <meta name="keywords" content="Android,Android Studio,library,JCenter,Maven">
  <meta name="description" content="前言如果你想在Android Studio中引入一个library到你的项目，你只需添加如下的一行代码到模块的build.gradle文件中:
1compile &apos;com.sherlockshi.widget:aspectratioimageview:1.0.1&apos;
就是如此简单的一行代码，你就可以使用这个library了。">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Android Studio把自己的Android library分发到JCenter">
<meta property="og:url" content="http://sherlockshi.github.io/2016/09/29/15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter/index.html">
<meta property="og:site_name" content="SherlockShi's Home">
<meta property="og:description" content="前言如果你想在Android Studio中引入一个library到你的项目，你只需添加如下的一行代码到模块的build.gradle文件中:
1compile &apos;com.sherlockshi.widget:aspectratioimageview:1.0.1&apos;
就是如此简单的一行代码，你就可以使用这个library了。">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/64566263.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/13698614.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/26172115.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/78523250.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/98586757.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-2/47591545.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61816057.jpg">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/52163301.jpg">
<meta property="og:updated_time" content="2016-10-09T14:17:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用Android Studio把自己的Android library分发到JCenter">
<meta name="twitter:description" content="前言如果你想在Android Studio中引入一个library到你的项目，你只需添加如下的一行代码到模块的build.gradle文件中:
1compile &apos;com.sherlockshi.widget:aspectratioimageview:1.0.1&apos;
就是如此简单的一行代码，你就可以使用这个library了。">
<meta name="twitter:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/64566263.jpg">
  
    <link rel="alternative" href="/atom.xml" title="SherlockShi&#39;s Home" type="application/atom+xml">
  
  <meta name="summary" content="&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;如果你想在Android Studio中引入一个library到你的项目，你只需添加如下的一行代码到模块的build.gradle文件中:&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;compile &lt;span class=&quot;string&quot;&gt;&#39;com.sherlockshi.widget:aspectratioimageview:1.0.1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;就是如此简单的一行代码，你就可以使用这个library了。&lt;/p&gt;">
  <link rel="shortcut icon" href="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner flex-row-vertical">
  <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg"></a>
      <hgroup class="introduce">
        <h5 class="nickname">SherlockShi</h5>
        <a href="mailto:sherlock_shi@163.com" title="sherlock_shi@163.com" class="mail">sherlock_shi@163.com</a>
      </hgroup>
    </div>
  </div>
  <div class="scroll-wrap flex-col">
    <ul class="nav">
      
          <li class="waves-block waves-effect">
            <a href="/"  >
              <i class="icon icon-lg icon-home"></i>
              Home
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/archives"  >
              <i class="icon icon-lg icon-archives"></i>
              Archives
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/tags"  >
              <i class="icon icon-lg icon-tags"></i>
              Tags
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="https://github.com/sherlockshi" target="_blank" >
              <i class="icon icon-lg icon-github"></i>
              Github
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="http://weibo.com/2283093752" target="_blank" >
              <i class="icon icon-lg icon-weibo"></i>
              Weibo
            </a>
          </li>
      
    </ul>

    <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>SherlockShi&#39;s Home &copy; 2016</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

  </div>
</div>

  </nav>
  <main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">使用Android Studio把自己的Android library分发到JCenter</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input " autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">使用Android Studio把自己的Android library分发到JCenter</h1>
    <h5 class="subtitle">
        
            <time datetime="2016-09-29T15:28:01.000Z" itemprop="datePublished" class="page-time">
  2016-09-29
</time>


        
    </h5>
  </div>
</header>

    <div class="container body-wrap">
      <article id="post-15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter" 
  class="article article-type-post" itemprop="blogPost">
    <div class="post-meta flex-row">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-Studio/">Android Studio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JCenter/">JCenter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Maven/">Maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/library/">library</a></li></ul>

    </div>
    <div class="post-body">
        <aside class="post-widget" id="post-widget">

            
            <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

            

            
            <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#前言"><span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、Android-studio-是从哪里得到库的？"><span class="post-toc-text">一、Android studio 是从哪里得到库的？</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-JCenter"><span class="post-toc-text">1. JCenter</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-Maven-Central"><span class="post-toc-text">2. Maven Central</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、理解JCenter和Maven-Central"><span class="post-toc-text">二、理解JCenter和Maven Central</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#三、gradle是如何从仓库上获取一个library的？"><span class="post-toc-text">三、gradle是如何从仓库上获取一个library的？</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#四、了解aar文件"><span class="post-toc-text">四、了解aar文件</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#五、如何上传library到JCenter"><span class="post-toc-text">五、如何上传library到JCenter</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-在bintray上创建package"><span class="post-toc-text">1. 在bintray上创建package</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-准备一个Android-Studio项目"><span class="post-toc-text">2. 准备一个Android Studio项目</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-把library上传到你的bintray空间"><span class="post-toc-text">3. 把library上传到你的bintray空间</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-同步bintray用户仓库到JCenter"><span class="post-toc-text">4. 同步bintray用户仓库到JCenter</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-用法"><span class="post-toc-text">5. 用法</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#六、踩坑经历"><span class="post-toc-text">六、踩坑经历</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-编译上传时，提示jar包未找到"><span class="post-toc-text">1. 编译上传时，提示jar包未找到</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#七、参考"><span class="post-toc-text">七、参考</span></a></li></ol>
            </nav>
            
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如果你想在Android Studio中引入一个library到你的项目，你只需添加如下的一行代码到模块的build.gradle文件中:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.sherlockshi.widget:aspectratioimageview:1.0.1'</span></span><br></pre></td></tr></table></figure>
<p>就是如此简单的一行代码，你就可以使用这个library了。</p>
<a id="more"></a>
<p>酷呆了。不过你可能很好奇Android Studio是从哪里得到这个library的。这篇文章将详细讲解这是怎么回事，包括如何把你的库发布出去分享给世界各地的其他开发者，这样不仅可以让世界更美好，还可以耍一次酷。</p>
<h1 id="一、Android-studio-是从哪里得到库的？"><a href="#一、Android-studio-是从哪里得到库的？" class="headerlink" title="一、Android studio 是从哪里得到库的？"></a>一、Android studio 是从哪里得到库的？</h1><p>先从这个简单的问题开始，我相信不是每个人都完全明白Android studio 是从哪里得到这些library的。莫非就是Android studio 从google搜索然后下载了一个合适的给我们？</p>
<p>呵呵，没那么复杂。Android Studio是从build.gradle里面定义的Maven 仓库服务器上下载library的。Apache Maven是Apache开发的一个工具，提供了用于贡献library的文件服务器。总的来说，只有两个标准的Android library文件服务器：<code>JCenter</code> 和 <code>Maven Central</code>。</p>
<h2 id="1-JCenter"><a href="#1-JCenter" class="headerlink" title="1. JCenter"></a>1. JCenter</h2><p>JCenter是一个由<code>bintray.com</code>维护的Maven仓库 。你可以在<a href="http://jcenter.bintray.com/" target="_blank" rel="external">这里</a>看到整个仓库的内容。<br>我们在项目的build.gradle 文件中如下定义仓库，就能使用JCenter了：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Maven-Central"><a href="#2-Maven-Central" class="headerlink" title="2. Maven Central"></a>2. Maven Central</h2><p>Maven Central 则是由sonatype.org维护的Maven仓库。你可以在这里看到整个仓库。  </p>
<blockquote>
<p>注：不管是JCenter还是Maven Central ，两者都是Maven仓库  </p>
</blockquote>
<p>我们在项目的build.gradle 文件中如下定义仓库，就能使用Maven Central了：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，虽然JCenter和Maven Central 都是标准的 android library仓库，但是它们维护在完全不同的服务器上，由不同的人提供内容，两者之间毫无关系。在JCenter上有的可能 Maven Central 上没有，反之亦然。</p>
<p>除了两个标准的服务器之外，如果我们使用的library的作者是把该library放在自己的服务器上，我们还可以自己定义特有的Maven仓库服务器。Twitter的Fabric.io 就是这种情况，它们在 <a href="https://maven.fabric.io/public" target="_blank" rel="external">https://maven.fabric.io/public</a> 上维护了一个自己的Maven仓库。如果你想使用Fabric.io的library，你必须自己如下定义仓库的url。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">    maven &#123; url <span class="string">'https://maven.fabric.io/public'</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在里面使用相同的方法获取一个library:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.crashlytics.sdk.android:crashlytics:2.2.4@aar'</span></span><br></pre></td></tr></table></figure>
<p>但是将library上传到标准的服务器与自建服务器，哪种方法更好呢？当然是前者。如果将我们的library公开，其他开发者除了一行定义依赖名的代码之外不需要定义任何东西。因此这篇文章中，我们将只关注对开发者更友好的JCenter 和 Maven Central 。</p>
<p>实际上可以在Android Studio上使用的除了Maven 仓库之外还有另外一种仓库：Ivy 仓库 。但是根据我的经验来看，我还没看到任何人用过它，包括我，因此本文就直接忽略了。</p>
<h1 id="二、理解JCenter和Maven-Central"><a href="#二、理解JCenter和Maven-Central" class="headerlink" title="二、理解JCenter和Maven Central"></a>二、理解JCenter和Maven Central</h1><p>为何有两个标准的仓库？</p>
<p>事实上两个仓库都具有相同的使命：提供Java或者Android library服务。上传到哪个（或者都上传）取决于开发者。</p>
<p>起初，Android Studio 选择Maven Central作为默认仓库。如果你使用老版本的Android Studio创建一个新项目，mavenCentral()会自动的定义在build.gradle中。</p>
<p>但是Maven Central的最大问题是对开发者不够友好。上传library异常困难。上传上去的开发者都是某种程度的极客。同时还因为诸如安全方面的其他原因，Android Studio团队决定把默认的仓库替换成JCenter。正如你看到的，一旦使用最新版本的Android Studio创建一个项目，JCenter()自动被定义，而不是mavenCentral()。</p>
<p>有许多将Maven Central替换成JCenter的理由，下面是几个主要的原因。</p>
<ul>
<li>JCenter通过CDN发送library，开发者可以享受到更快的下载体验。</li>
<li>JCenter是全世界最大的Java仓库，因此在Maven Central 上有的，在JCenter上也极有可能有。换句话说JCenter是Maven Central的<code>超集</code>。</li>
<li>上传library到仓库很简单，不需要像在Maven Central上做很多复杂的事情。</li>
<li>友好的用户界面</li>
<li>如果你想把library上传到Maven Central ，你可以在bintray网站上直接点击一个按钮就能实现。</li>
</ul>
<p>基于上面的原因以及我自己的经验，可以说替换到JCenter是明智之举。</p>
<p>所以我们这篇文章将把重心放在JCenter，反正如果你能成功把library放在JCenter，转到 Maven Central 是非常容易的事情。</p>
<h1 id="三、gradle是如何从仓库上获取一个library的？"><a href="#三、gradle是如何从仓库上获取一个library的？" class="headerlink" title="三、gradle是如何从仓库上获取一个library的？"></a>三、gradle是如何从仓库上获取一个library的？</h1><p>在讨论如何上传library到JCenter之前，我们先看看gradle是如何从仓库获取library的。比如我们在 build.gradle输入如下代码的时候，这些库是如果奇迹般下载到我们的项目中的。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.sherlockshi.widget:aspectratioimageview:1.0.1'</span></span><br></pre></td></tr></table></figure>
<p>一般来说，我们需要知道library的字符串形式，包含3部分</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">GROUP_ID:</span><span class="string">ARTIFACT_ID:</span>VERSION</span><br></pre></td></tr></table></figure>
<p>上面的例子中，GROUP_ID是<code>com.sherlockshi.widget</code>，ARTIFACT_ID是<code>aspectratioimageview</code>，VERSION是<code>1.0.1</code>。</p>
<p>GROUP_ID定义了library的group。有可能在同样的上下文中存在多个不同功能的library。如果library具有相同的group，那么它们将共享一个GROUP_ID。通常我们以开发者包名紧跟着library的group名称来命名，比如com.squareup.picasso。然后ARTIFACT_ID中是library的真实名称。至于VERSION，就是版本号而已，虽然可以是任意文字，但是我建议设置为x.y.z的形式，如果喜欢还可以加上beta这样的后缀。</p>
<p>下面是Square library的一个例子。你可以看到每个都可以很容易的分辨出library和开发者的名称。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  compile <span class="string">'com.squareup:otto:1.3.7'</span></span><br><span class="line">  compile <span class="string">'com.squareup.picasso:picasso:2.5.2'</span></span><br><span class="line">  compile <span class="string">'com.squareup.okhttp:okhttp:2.4.0'</span></span><br><span class="line">  compile <span class="string">'com.squareup.retrofit:retrofit:1.9.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么在添加了上面的依赖之后会发生什么呢？简单。Gradle会询问Maven仓库服务器这个library是否存在，如果是，gradle会获得请求library的路径，一般这个路径都是这样的形式：GROUP_ID/ARTIFACT_ID/VERSION_ID。比如可以在<a href="http://jcenter.bintray.com/com/squareup/otto/1.3.7" target="_blank" rel="external">http://jcenter.bintray.com/com/squareup/otto/1.3.7</a> 和 <a href="https://oss.sonatype.org/content/repositories/releases/com/squareup/otto/1.3.7/" target="_blank" rel="external">https://oss.sonatype.org/content/repositories/releases/com/squareup/otto/1.3.7/</a><br>下获得com.squareup:otto:1.3.7的library文件。</p>
<p>然后Android Studio 将下载这些文件到我们的电脑上，与我们的项目一起编译。整个过程就是这么简单，一点都不复杂。</p>
<p>我相信你应该清楚的知道从仓库上下载的library只是存储在仓库服务器上的jar 或者aar文件而已。有点类似于自己去下载这些文件，拷贝然后和项目一起编译。但是使用gradle依赖管理的最大好处是你除了添加几行文字之外啥也不做。library一下子就可以在项目中使用了。</p>
<h1 id="四、了解aar文件"><a href="#四、了解aar文件" class="headerlink" title="四、了解aar文件"></a>四、了解aar文件</h1><p>等等，我刚才说了仓库中存储的有两种类型的library：jar 和 aar。jar文件大家都知道，但是什么是aar文件呢？</p>
<p>aar文件时在jar文件之上开发的。之所以有它是因为有些Android Library需要植入一些安卓特有的文件，比如AndroidManifest.xml，资源文件，Assets或者JNI。这些都不是jar文件的标准。</p>
<p>因此aar文件就时发明出来包含所有这些东西的。总的来说它和jar一样只是普通的zip文件，不过具有不同的文件结构。jar文件以classes.jar的名字被嵌入到aar文件中。其余的文件罗列如下：<br>– /AndroidManifest.xml (mandatory)<br>– /classes.jar (mandatory)<br>– /res/ (mandatory)<br>– /R.txt (mandatory)<br>– /assets/ (optional)<br>– /libs/.jar (optional)<br>– /jni//.so (optional)<br>– /proguard.txt (optional)<br>– /lint.jar (optional)<br>可以看到.aar文件是专门为安卓设计的。因此这篇文章将教你如何创建与上传一个aar形式的library。</p>
<h1 id="五、如何上传library到JCenter"><a href="#五、如何上传library到JCenter" class="headerlink" title="五、如何上传library到JCenter"></a>五、如何上传library到JCenter</h1><p>我相信你已经知道了仓库系统的大体工作原理。现在我们来开始最重要的部分：上传。这个任务和如何上传library文件到<a href="http://jcenter.bintray.com" target="_blank" rel="external">http://jcenter.bintray.com</a> 一样简单。如果做到，这个library就算发布了。好吧，有两个需要考虑：如何创建aar文件以及如何上传构建的文件到仓库。</p>
<p>虽然需要若干步骤，但是我还是想强调这事并不复杂，因为已经准备好了所有事情。整个过程如下图：<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/64566263.jpg" alt=""></p>
<p>因为细节比较多，我分为以下几个部分，一步一步的详细解释清楚。</p>
<h2 id="1-在bintray上创建package"><a href="#1-在bintray上创建package" class="headerlink" title="1. 在bintray上创建package"></a>1. 在bintray上创建package</h2><p><strong>第一步</strong></p>
<p>在bintray.com上注册一个账号。（注册过程很简单，自己完成，也可以直接使用Github账号）</p>
<p><strong>第二步</strong></p>
<p>完成注册之后，登录网站，然后点击+号<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/13698614.jpg" alt=""></p>
<p><strong>第三步</strong></p>
<p>输入Repository相关信息，创建一个Repository<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/26172115.jpg" alt=""></p>
<p><strong>第四步</strong></p>
<p>点击打开刚才创建好的Repository<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/78523250.jpg" alt=""></p>
<p><strong>第五步</strong></p>
<p>点击<code>Add New Package</code>，为我们的library创建一个新的package<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/98586757.jpg" alt=""></p>
<p><strong>第六步</strong></p>
<p>按页面要求填写相关信息<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-2/47591545.jpg" alt=""></p>
<p>完工！现在你有了自己在Bintray上的Maven仓库，可以准备上传library到上面了。</p>
<h2 id="2-准备一个Android-Studio项目"><a href="#2-准备一个Android-Studio项目" class="headerlink" title="2. 准备一个Android Studio项目"></a>2. 准备一个Android Studio项目</h2><p>很多情况下，我们需要同时上传一个以上的library到仓库，也可能不需要上传东西。因此我建议最好将每部分分成一个Module。最好分成两个module，一个Application Module一个Library Module。Application Module用于展示库的用法，Library Module是library的源代码。如果你的项目有一个以上的library，尽量创建另外的module：1个 module对应1 个library。<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61816057.jpg" alt=""><br>我相信大家知道如何创建一个新的module，因此就不会深入讲解这个问题了。其实很简单，基本就是选择 <code>File</code> -&gt; <code>New</code> -&gt; <code>Module</code>，选择<code>Android Library</code>，然后就完了。</p>
<p><strong>添加bintray插件</strong></p>
<p>我们需要修改<code>项目的build.gradle</code>文件中的依赖部分，如下：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">    classpath <span class="string">'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.6'</span></span><br><span class="line">    classpath <span class="string">'com.github.dcendents:android-maven-gradle-plugin:1.4.1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>配置Bintray账号以及开发者信息</strong></p>
<p>接下来我们将修改<code>local.properties</code>。在里面定义api key的用户名以及被创建key的密码，用于bintray的认证。之所以要把这些东西放在这个文件是因为这些信息时比较敏感的，不应该到处分享，包括版本控制里面。幸运的是在创建项目的时候local.properties文件就已经被添加到.gitignore了。因此这些敏感数据不会被误传到git服务器。</p>
<p>下面是要添加的代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#bintray</span><br><span class="line">bintray.user=******</span><br><span class="line">bintray.apikey=******</span><br><span class="line"></span><br><span class="line">#developer</span><br><span class="line">developer.id=******</span><br><span class="line">developer.name=******</span><br><span class="line">developer.email=******</span><br></pre></td></tr></table></figure>
<ul>
<li>bintray.user：你的Bintray的用户名</li>
<li>bintray.apikey：你的的Bintray的API Key,可以在<code>Edit Profile</code>页面的 <code>API Key</code> 选项卡中找到</li>
<li>developer.id：通常是你在开源社区的昵称</li>
<li>developer.name：你的姓名</li>
<li>developer.email：你的邮箱</li>
</ul>
<p><strong>配置项目信息</strong></p>
<p>在<code>library module</code>目录下新建<code>project.properties</code>文件，输入以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#project</span><br><span class="line">project.name=AspectRatioImageView</span><br><span class="line">project.bintrayRepo=android-widgets</span><br><span class="line">project.groupId=com.sherlockshi.widget</span><br><span class="line">project.artifactId=aspectratioimageview</span><br><span class="line">project.packaging=aar</span><br><span class="line">project.siteUrl=https://github.com/SherlockShi/AspectRatioImageView</span><br><span class="line">project.gitUrl=https://github.com/SherlockShi/AspectRatioImageView.git</span><br><span class="line"></span><br><span class="line">#javadoc</span><br><span class="line">javadoc.name=AspectRatioImageView</span><br></pre></td></tr></table></figure>
<ul>
<li>project.name：项目名称</li>
<li>project.groupId：项目组ID</li>
<li>project.artifactId：项目ID</li>
<li>project.packaging：包类型，Android库是aar</li>
<li>project.siteUrl：项目官方网站的地址，没有的话就用Github上的地址</li>
<li>project.gitUrl：项目的Git地址</li>
<li>javadoc.name：生成的javadoc打开后主页显示的名称，通常跟项目名称一样即可</li>
</ul>
<p><strong>配置bintrayUpload.gradle</strong></p>
<blockquote>
<p>本步骤也可以直接使用别人打包好的脚本引入即可，但本文主要介绍原理，有需要的可以自己搜索。</p>
</blockquote>
<ul>
<li>首先在<code>library module</code>目录下新建<code>bintrayUpload.gradle</code>文件，直接粘贴以下内容：  </li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="string">plugin:</span> <span class="string">'com.github.dcendents.android-maven'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'com.jfrog.bintray'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// load properties</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties()</span><br><span class="line">File localPropertiesFile = project.file(<span class="string">"../local.properties"</span>);</span><br><span class="line"><span class="keyword">if</span>(localPropertiesFile.exists())&#123;</span><br><span class="line">    properties.load(localPropertiesFile.newDataInputStream())</span><br><span class="line">&#125;</span><br><span class="line">File projectPropertiesFile = project.file(<span class="string">"project.properties"</span>);</span><br><span class="line"><span class="keyword">if</span>(projectPropertiesFile.exists())&#123;</span><br><span class="line">    properties.load(projectPropertiesFile.newDataInputStream())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// read properties</span></span><br><span class="line"><span class="keyword">def</span> projectName = properties.getProperty(<span class="string">"project.name"</span>)</span><br><span class="line"><span class="keyword">def</span> projectBintrayRepo = properties.getProperty(<span class="string">"project.bintrayRepo"</span>)</span><br><span class="line"><span class="keyword">def</span> projectGroupId = properties.getProperty(<span class="string">"project.groupId"</span>)</span><br><span class="line"><span class="keyword">def</span> projectArtifactId = properties.getProperty(<span class="string">"project.artifactId"</span>)</span><br><span class="line"><span class="keyword">def</span> projectVersionName = android.defaultConfig.versionName</span><br><span class="line"><span class="keyword">def</span> projectPackaging = properties.getProperty(<span class="string">"project.packaging"</span>)</span><br><span class="line"><span class="keyword">def</span> projectSiteUrl = properties.getProperty(<span class="string">"project.siteUrl"</span>)</span><br><span class="line"><span class="keyword">def</span> projectGitUrl = properties.getProperty(<span class="string">"project.gitUrl"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> developerId = properties.getProperty(<span class="string">"developer.id"</span>)</span><br><span class="line"><span class="keyword">def</span> developerName = properties.getProperty(<span class="string">"developer.name"</span>)</span><br><span class="line"><span class="keyword">def</span> developerEmail = properties.getProperty(<span class="string">"developer.email"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> bintrayUser = properties.getProperty(<span class="string">"bintray.user"</span>)</span><br><span class="line"><span class="keyword">def</span> bintrayApikey = properties.getProperty(<span class="string">"bintray.apikey"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> javadocName = properties.getProperty(<span class="string">"javadoc.name"</span>)</span><br><span class="line"></span><br><span class="line">group = projectGroupId</span><br><span class="line"></span><br><span class="line"><span class="comment">// This generates POM.xml with proper parameters</span></span><br><span class="line">install &#123;</span><br><span class="line">    repositories.mavenInstaller &#123;</span><br><span class="line">        pom &#123;</span><br><span class="line">            project &#123;</span><br><span class="line">                name projectName</span><br><span class="line">                groupId projectGroupId</span><br><span class="line">                artifactId projectArtifactId</span><br><span class="line">                version projectVersionName</span><br><span class="line">                packaging projectPackaging</span><br><span class="line">                url projectSiteUrl</span><br><span class="line">                licenses &#123;</span><br><span class="line">                    license &#123;</span><br><span class="line">                        name <span class="string">'The Apache Software License, Version 2.0'</span></span><br><span class="line">                        url <span class="string">'http://www.apache.org/licenses/LICENSE-2.0.txt'</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                developers &#123;</span><br><span class="line">                    developer &#123;</span><br><span class="line">                        id developerId</span><br><span class="line">                        name developerName</span><br><span class="line">                        email developerEmail</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                scm &#123;</span><br><span class="line">                    connection projectGitUrl</span><br><span class="line">                    developerConnection projectGitUrl</span><br><span class="line">                    url projectSiteUrl</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.writeTo(<span class="string">"$buildDir/poms/pom-default.xml"</span>).writeTo(<span class="string">"pom.xml"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This generates sources.jar</span></span><br><span class="line">task sourcesJar(<span class="string">type:</span> Jar) &#123;</span><br><span class="line">    from android.sourceSets.main.java.srcDirs</span><br><span class="line">    classifier = <span class="string">'sources'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task javadoc(<span class="string">type:</span> Javadoc) &#123;</span><br><span class="line">    source = android.sourceSets.main.java.srcDirs</span><br><span class="line">    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This generates javadoc.jar</span></span><br><span class="line">task javadocJar(<span class="string">type:</span> Jar, <span class="string">dependsOn:</span> javadoc) &#123;</span><br><span class="line">    classifier = <span class="string">'javadoc'</span></span><br><span class="line">    from javadoc.destinationDir</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives javadocJar</span><br><span class="line">    archives sourcesJar</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// javadoc configuration</span></span><br><span class="line">javadoc &#123;</span><br><span class="line">    options&#123;</span><br><span class="line">        encoding <span class="string">"UTF-8"</span></span><br><span class="line">        charSet <span class="string">'UTF-8'</span></span><br><span class="line">        author <span class="literal">true</span></span><br><span class="line">        version projectVersionName</span><br><span class="line">        links <span class="string">"http://docs.oracle.com/javase/7/docs/api"</span></span><br><span class="line">        title javadocName</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bintray configuration</span></span><br><span class="line">bintray &#123;</span><br><span class="line">    user = bintrayUser</span><br><span class="line">    key = bintrayApikey</span><br><span class="line">    configurations = [<span class="string">'archives'</span>]</span><br><span class="line">    pkg &#123;</span><br><span class="line">        repo = projectBintrayRepo</span><br><span class="line">        name = projectName</span><br><span class="line">        websiteUrl = projectSiteUrl</span><br><span class="line">        vcsUrl = projectGitUrl</span><br><span class="line">        licenses = [<span class="string">"Apache-2.0"</span>]</span><br><span class="line">        publish = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>然后修改你的<code>library module</code>的<code>build.gradle</code>文件，在最后加上：</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="string">from:</span> <span class="string">"bintrayUpload.gradle"</span></span><br></pre></td></tr></table></figure>
<h2 id="3-把library上传到你的bintray空间"><a href="#3-把library上传到你的bintray空间" class="headerlink" title="3. 把library上传到你的bintray空间"></a>3. 把library上传到你的bintray空间</h2><p>打开终端进入项目目录下，执行<code>gradlew bintrayUpload</code>命令即可</p>
<p>另外，如果你的本地已经配置了Gradle了，那么执行<code>gradle bintrayUpload</code>命令也可以。gradlew是Gradle的一层封装，如果你本地没有安装Gradle, gradlew就会自动下载Gradle。</p>
<p>在bintray的网页上检查一下你的package。你会发现在版本区域的变化。<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/52163301.jpg" alt=""></p>
<p>点击进去，进入Files选项卡，你会看见那里有我们所上传的library文件。</p>
<p>恭喜，你的library终于放在了互联网上，任何人都可以使用了！</p>
<p>不过也别高兴过头，library现在仍然只是在你自己的Maven仓库，而不是在JCenter上。如果有人想使用你的library，他必须定义仓库的url，如下：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">'https://dl.bintray.com/sherlockshi/android-widgets/'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">'com.sherlockshi.widgets:aspectratioimageview:1.0.1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你可以在bintray的web界面找到自己Maven仓库的url，或者直接吧nuuneoi替换成你的bintray用户名（因为前面部分其实都是一样的）。我还建议你直接访问那个链接，看看里面到底是什么。</p>
<p>但是，就如我们前面所讲的那样，让开发者去定义url这种复杂的事情并不是分享library的最佳方式。想象一下，使用10个library不得添加10个url？所以为了更好的体验，我们把library从自己的仓库传到JCenter上。</p>
<h2 id="4-同步bintray用户仓库到JCenter"><a href="#4-同步bintray用户仓库到JCenter" class="headerlink" title="4. 同步bintray用户仓库到JCenter"></a>4. 同步bintray用户仓库到JCenter</h2><p>把library同步到JCenter非常容易，只需访问网页在package界面<code>Linked To</code>区域点击右下角的<code>Add to JCenter</code>，什么也不用填，直接点击<code>Send</code>。</p>
<p>现在我们所能做的就是等待bintray团队审核我们的请求，大概4-5个小时。一旦同步的请求审核通过，你会收到一封确认此更改的邮件。现在我们去网页上确认，你会在 Linked To 部分看到已链接到JCenter仓库。</p>
<h2 id="5-用法"><a href="#5-用法" class="headerlink" title="5. 用法"></a>5. 用法</h2><p>从此之后，任何开发者都可以使用JCenter() repository 外加一行gradle脚本来使用我们的library了</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.sherlockshi.widget:aspectratioimageview:1.0.1'</span></span><br></pre></td></tr></table></figure>
<p>想检查一下自己的library在JCenter上是否存在？你可以直接访问<a href="http://jcenter.bintray.com" target="_blank" rel="external">http://jcenter.bintray.com</a> ，然后进入和你library的group id 以及artifact id匹配的目录。在本例中就是com -&gt; sherlockshi -&gt; widget -&gt; aspectratioimageview -&gt; 1.0.1。</p>
<p>请注意链接到JCenter是一个只需做一次的操作。如果你对你的package做了任何修改，比如上传了一个新版本的binary，删除了旧版本的binary等等，这些改变也会影响到JCenter。不过毕竟你自己的仓库和JCenter在不同的地方，所以需要等待2－3分钟让JCenter同步这些修改。</p>
<p>同时注意，如果你决定删除整个package，放在JCenter仓库上的library不会被删除。它们会像僵尸一样的存在，没有人再能删除它了。因此我建议，如果你想删除整个package，请在移除package之前先在网页上删除每一个版本。</p>
<p>恭喜！虽然需要许多步骤，但是每一步都很简单。而且大部分操作都是一劳永逸的。</p>
<p>期待能在上面看到你的library大作！</p>
<h1 id="六、踩坑经历"><a href="#六、踩坑经历" class="headerlink" title="六、踩坑经历"></a>六、踩坑经历</h1><h2 id="1-编译上传时，提示jar包未找到"><a href="#1-编译上传时，提示jar包未找到" class="headerlink" title="1. 编译上传时，提示jar包未找到"></a>1. 编译上传时，提示jar包未找到</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:aspectratioimageview:bintrayUpload: file /Users/sherlock/work/workspace/AndroidStudio/AspectRatioImageView/aspectratioimageview/build/libs/aspectratioimageview-1.0.1-javadoc.jar could not be found.</span><br><span class="line">:aspectratioimageview:bintrayUpload: file /Users/sherlock/work/workspace/AndroidStudio/AspectRatioImageView/aspectratioimageview/build/libs/aspectratioimageview-1.0.1-sources.jar could not be found.</span><br></pre></td></tr></table></figure>
<p>解决方法：<br>先执行<code>gradlew install</code>，再执行<code>gradlew bintrayUpload</code></p>
<h1 id="七、参考"><a href="#七、参考" class="headerlink" title="七、参考"></a>七、参考</h1><p><a href="http://www.devtf.cn/?p=760" target="_blank" rel="external">如何使用Android Studio把自己的Android library分发到JCenter和Maven Central</a></p>
<p><a href="https://github.com/xiaopansky/android-library-publish-to-jcenter" target="_blank" rel="external">5分钟发布Android Library项目到JCenter</a></p>


            
            <div class="post-reward">
                <a id="rewardBtn" href="javascript:;" class="post-reward-btn waves-effect waves-circle waves-light">赏</a>
            </div>
            
            
            <blockquote>
                <p>
                本文地址：
                <a href="http://sherlockshi.github.io/2016/09/29/15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter/" target="_blank" rel="external">http://sherlockshi.github.io/2016/09/29/15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter/</a>
                </p>
                <footer><cite><a href="http://sherlockshi.github.io">@SherlockShi's Home</a></cite></footer>
            </blockquote>
            </div>
            
<nav class="post-nav">
  
    <div class="waves-block waves-effect prev fl">
      <a href="/2016/10/02/30_博客/3005_Hexo/Hexo常用命令/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Hexo常用命令</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next fr">
      <a href="/2016/08/18/40_微信公众平台/使用natapp进行微信本地开发调试/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">使用natapp进行微信本地开发调试</h4>
      </a>
    </div>
  
</nav>


            
            
<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter" data-title="使用Android Studio把自己的Android library分发到JCenter" data-url="http://sherlockshi.github.io/2016/09/29/15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter/index.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"sherlockshi"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>





        </div>
    </div>
</article>
    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "使用Android Studio把自己的Android library分发到JCenter",
    pic: "http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://sherlockshi.github.io/2016/09/29/15_Android/1555_Maven/使用Android Studio把自己的Android library分发到jCenter/index.html"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>




<div id="reward" class="reward-lay">
    <a class="reward-off" id="rewardOff" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢大侠慷慨解囊～
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        <li>
            <img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/51725532.jpg" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/44887159.jpg" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>

<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<script type="text/template" id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</script>

<script src="/js/search.js"></script>







<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-85064715-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



</body>
</html>
