<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <link rel="canonical" href="http://sherlockshi.github.io//2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/">
  
  
  <title>Android自定义组合控件：SherlockSpinner | SherlockShi&#39;s Home | Don&#39;t be evil.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#3F51B5">
  
  
  <meta name="keywords" content="Android,自定义控件,Spinner">
  <meta name="description" content="如果你觉得从头开始自定义一个View比较麻烦，那么组合几个系统现有控件来实现需求的功能，会是你很好的一个选择。">
<meta property="og:type" content="article">
<meta property="og:title" content="Android自定义组合控件：SherlockSpinner">
<meta property="og:url" content="http://sherlockshi.github.io/2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/index.html">
<meta property="og:site_name" content="SherlockShi's Home">
<meta property="og:description" content="如果你觉得从头开始自定义一个View比较麻烦，那么组合几个系统现有控件来实现需求的功能，会是你很好的一个选择。">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-20-demo4.gif">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-21-demo10.gif">
<meta property="og:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-21-demo8.gif">
<meta property="og:updated_time" content="2016-11-21T14:00:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android自定义组合控件：SherlockSpinner">
<meta name="twitter:description" content="如果你觉得从头开始自定义一个View比较麻烦，那么组合几个系统现有控件来实现需求的功能，会是你很好的一个选择。">
<meta name="twitter:image" content="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-20-demo4.gif">
  
    <link rel="alternative" href="/atom.xml" title="SherlockShi&#39;s Home" type="application/atom+xml">
  
  <meta name="summary" content="&lt;p&gt;如果你觉得从头开始自定义一个View比较麻烦，那么组合几个系统现有控件来实现需求的功能，会是你很好的一个选择。&lt;/p&gt;">
  <link rel="shortcut icon" href="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg">
  <link rel="stylesheet" href="/css/style.css?v=undefined">
</head>

<body>
  <div id="loading" class="active"></div>

  <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      <div class="brand">
        <a href="/" class="avatar"><img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg"></a>
        <hgroup class="introduce">
          <h5 class="nickname">SherlockShi</h5>
          <a href="mailto:sherlock_shi@163.com" title="sherlock_shi@163.com" class="mail">sherlock_shi@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/sherlockshi" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://weibo.com/2283093752" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>

      <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>SherlockShi&#39;s Home &copy; 2016</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

    </div>
  </div>
</aside>
  <main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Android自定义组合控件：SherlockSpinner</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container">
        <h1 class="title">Android自定义组合控件：SherlockSpinner</h1>
        
        

    </div>

    

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、前言"><span class="post-toc-text">一、前言</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、使用系统Spinner"><span class="post-toc-text">二、使用系统Spinner</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-首先，我想到的便是使用系统的Spinner，说干就干，XML先上："><span class="post-toc-text">1. 首先，我想到的便是使用系统的Spinner，说干就干，XML先上：</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件："><span class="post-toc-text">2. 然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件：</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-接着我们来设置点击事件"><span class="post-toc-text">3. 接着我们来设置点击事件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-那我们就设置Touch事件喽："><span class="post-toc-text">4. 那我们就设置Touch事件喽：</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、CustomSpinner-EditText-ListPopupWindow"><span class="post-toc-text">二、CustomSpinner = EditText + ListPopupWindow</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-XML布局"><span class="post-toc-text">1. XML布局</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-代码中创建ListPopupWindow"><span class="post-toc-text">2. 代码中创建ListPopupWindow</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-小结"><span class="post-toc-text">3. 小结</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#三、自定义组合控件"><span class="post-toc-text">三、自定义组合控件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-引入依赖"><span class="post-toc-text">1. 引入依赖</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-使用方法"><span class="post-toc-text">2. 使用方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-像使用系统Spinner一样，在XML文件中使用"><span class="post-toc-text">2.1 像使用系统Spinner一样，在XML文件中使用:</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-还是像使用系统Spinner一样，在代码中设置Adapter和ItemClickListener"><span class="post-toc-text">2.2 还是像使用系统Spinner一样，在代码中设置Adapter和ItemClickListener:</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-可选-如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理"><span class="post-toc-text">2.3 (可选) 如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-更多属性"><span class="post-toc-text">3. 更多属性</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#四、其它"><span class="post-toc-text">四、其它</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-15_Android/1540_Widget/自定义组合控件SherlockSpinner" 
  class="post-article article-type-post" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Android自定义组合控件：SherlockSpinner</h1>
        <div class="post-meta">
            <time datetime="2016-11-21T12:30:00.000Z" itemprop="datePublished" class="post-time">
  2016-11-21
</time>

            


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>如果你觉得从头开始自定义一个View比较麻烦，那么组合几个系统现有控件来实现需求的功能，会是你很好的一个选择。</p>
<a id="more"></a>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>最近在项目中，需要使用Spinner来实现下拉选择功能，UI方面倒是要求不多。但是难点在于一个界面中有多个Spinner，并且有联动关系，数据需要在点击Spinner的时候请求服务器。而且当前Spinner数据依赖于前面选择的一个或多个结果，当获取到最新数据后，才显示下拉选项。</p>
<p>比如说我需要先选择一个仓库，再选择项目（依赖前面选择的仓库），再选择一个批次（依赖前面选择的仓库和项目），如果我在选择完仓库时，就去判断来预加载项目和批次的数据，会使依赖逻辑变得非常复杂。</p>
<p>这时候就想在每次点击一个Spinner的时候，去判断依赖的选项是否已经选择，未选择就提示需先选择；如果已选择，则进行网络请求，加载数据显示到下拉选项中。</p>
<p>（本例使用选择语言来进行演示。）</p>
<h1 id="二、使用系统Spinner"><a href="#二、使用系统Spinner" class="headerlink" title="二、使用系统Spinner"></a>二、使用系统Spinner</h1><h2 id="1-首先，我想到的便是使用系统的Spinner，说干就干，XML先上："><a href="#1-首先，我想到的便是使用系统的Spinner，说干就干，XML先上：" class="headerlink" title="1. 首先，我想到的便是使用系统的Spinner，说干就干，XML先上："></a>1. 首先，我想到的便是使用系统的Spinner，说干就干，XML先上：</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Spinner</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/spn_languages"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"36dp"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件："><a href="#2-然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件：" class="headerlink" title="2. 然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件："></a>2. 然后代码设置Adapter匹配数据、设置OnItemSelectedListener绑定item选择的事件：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">spnLanguages = (Spinner) findViewById(R.id.spn_languages);</span><br><span class="line">ArrayAdapter&lt;String&gt; mAdapterSystemSpinner = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(<span class="keyword">this</span>, android.R.layout.simple_list_item_1, mLanguages);</span><br><span class="line">spnLanguages.setAdapter(mAdapterSystemSpinner);</span><br><span class="line">spnLanguages.setOnItemSelectedListener(<span class="keyword">new</span> AdapterView.OnItemSelectedListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemSelected</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        showMessage(<span class="string">"Select "</span> + mLanguages[position]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNothingSelected</span><span class="params">(AdapterView&lt;?&gt; parent)</span> </span>&#123;</span><br><span class="line">        showMessage(<span class="string">"Select Nothing."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>OK，现在Spinner可以使用了：</p>
<p><img src="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-20-demo4.gif" alt=""></p>
<h2 id="3-接着我们来设置点击事件"><a href="#3-接着我们来设置点击事件" class="headerlink" title="3. 接着我们来设置点击事件"></a>3. 接着我们来设置点击事件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spnLanguages.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        showMessage(<span class="string">"Click Spinner"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>什么情况，运行后直接崩了？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FATAL EXCEPTION: main</span><br><span class="line">Process: com.sherlockshi.widget.sherlockspinner, PID: 11757</span><br><span class="line">java.lang.RuntimeException: Unable to start activity ComponentInfo&#123;com.sherlockshi.widget.sherlockspinner/com.sherlockshi.widget.MainActivity&#125;: java.lang.RuntimeException: Don&apos;t call setOnClickListener for an AdapterView. You probably want setOnItemClickListener instead</span><br><span class="line">   ...</span><br><span class="line">Caused by: java.lang.RuntimeException: Don&apos;t call setOnClickListener for an AdapterView. You probably want setOnItemClickListener instead</span><br><span class="line">   at android.widget.AdapterView.setOnClickListener(AdapterView.java:798)</span><br><span class="line">   at com.sherlockshi.widget.MainActivity.initSystemSpinner(MainActivity.java:169)</span><br><span class="line">   at com.sherlockshi.widget.MainActivity.onCreate(MainActivity.java:48)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
<p>简单来说就是，<code>AdapterView</code>不能设置Click事件，看下Spinner源码，确实是继承自<code>AdapterView</code>。（至于为什么<code>AdapterView</code>不能设置Click事件，这个暂未深究。）</p>
<h2 id="4-那我们就设置Touch事件喽："><a href="#4-那我们就设置Touch事件喽：" class="headerlink" title="4. 那我们就设置Touch事件喽："></a>4. 那我们就设置Touch事件喽：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">spnLanguages.setOnTouchListener(<span class="keyword">new</span> View.OnTouchListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction()) &#123;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                showMessage(<span class="string">"Touch Spinner"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这下确实是可以响应点击事件了，但是响应完，下拉选择就直接显示出来了，无法满足我们的需求。</p>
<p>而且Spinner还有个问题，一进入界面的时候，默认就会选择第一项，而我们并不需要这样的默认值。</p>
<h1 id="二、CustomSpinner-EditText-ListPopupWindow"><a href="#二、CustomSpinner-EditText-ListPopupWindow" class="headerlink" title="二、CustomSpinner = EditText + ListPopupWindow"></a>二、CustomSpinner = EditText + ListPopupWindow</h1><p>那我们是否可以使用别的控件，来实现相同的功能呢？答案是肯定的，我们用EditText来接收点击事件，而在请求完数据之后，使用ListPopupWindow来显示下拉选项，选择EditText的原因主要有以下几点：</p>
<ul>
<li>默认在底部会有带颜色的横线，Material Design风格的EditText看起来效果很不赖</li>
<li>EditText可以方便的配置上、下、左、右四个位置的小图标，我们可以在右侧放置一个向下的三角箭头，使它看起来像一个系统的Spinner</li>
</ul>
<p>而选择ListPopupWindow则是因为：</p>
<ul>
<li>可以方便的使用下拉列表</li>
<li>可以自由设置锚点</li>
</ul>
<h2 id="1-XML布局"><a href="#1-XML布局" class="headerlink" title="1. XML布局"></a>1. XML布局</h2><p>布局文件依旧很简单，只要一个简单的EditText，配上一个右侧的下拉图标：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/et_languages"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">    <span class="attr">android:gravity</span>=<span class="string">"right"</span></span><br><span class="line">    <span class="attr">android:drawableRight</span>=<span class="string">"@drawable/ic_dropdown"</span></span><br><span class="line">    <span class="attr">android:hint</span>=<span class="string">"Please Select..."</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-代码中创建ListPopupWindow"><a href="#2-代码中创建ListPopupWindow" class="headerlink" title="2. 代码中创建ListPopupWindow"></a>2. 代码中创建ListPopupWindow</h2><p>此部分包含以下逻辑：</p>
<ul>
<li>初始化ListPopupWindow，并关联到EditText上</li>
<li>当点击EditText时，请求数据，请求完成后，显示ListPopupWindow</li>
<li>选中ListPopupWindow的某一项后，将此项内容更新到EditText中，并隐藏ListPopupWindow</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">etLanguages = (EditText) findViewById(R.id.et_languages);</span><br><span class="line">etLanguages.setKeyListener(<span class="keyword">null</span>); <span class="comment">// 设置EditText不可编辑，等同于在xml中设置editable="false"</span></span><br><span class="line">lpwLanguages = <span class="keyword">new</span> ListPopupWindow(<span class="keyword">this</span>);</span><br><span class="line">mAdapterLanguages = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(<span class="keyword">this</span>, android.R.layout.simple_list_item_1, mLanguages);</span><br><span class="line">lpwLanguages.setAdapter(mAdapterLanguages);</span><br><span class="line">lpwLanguages.setAnchorView(etLanguages); <span class="comment">//设置ListPopupWindow的锚点，即关联PopupWindow的显示位置</span></span><br><span class="line">lpwLanguages.setModal(<span class="keyword">true</span>); <span class="comment">// 是否为模态，当设置为true时，会处理返回按键的事件</span></span><br><span class="line"></span><br><span class="line">lpwLanguages.setOnItemClickListener(<span class="keyword">new</span> AdapterView.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        showMessage(<span class="string">"Select "</span> + mLanguages[position]);</span><br><span class="line"></span><br><span class="line">        etLanguages.setText(mLanguages[position]);</span><br><span class="line">        lpwLanguages.dismiss();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果使用onClick事件，会出现第一次点击只获取焦点，第二次点击才出现下拉</span></span><br><span class="line">etLanguages.setOnTouchListener(<span class="keyword">new</span> View.OnTouchListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.getAction() == MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">            <span class="comment">// Do what you want</span></span><br><span class="line">            getDataFromNet();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDataFromNet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 延时2秒后，修改源数据，用来模拟网络请求</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            mLanguages[<span class="number">1</span>] = <span class="string">"C+++++++++++++"</span>;</span><br><span class="line">            mAdapterLanguages.notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">            runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    lpwLanguages.show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现效果如下所示：<br><img src="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-21-demo10.gif" alt=""></p>
<h2 id="3-小结"><a href="#3-小结" class="headerlink" title="3. 小结"></a>3. 小结</h2><p>EditText配合ListPopupWindow组合实现Spinner的功能，使用起来倒是简单，逻辑也挺清晰的，但是如果界面上有三四个Spinner，那不是就得把类似的代码写上三四遍？</p>
<p>其实我们并不关心内部是用ListPopupWindow或者其它的控件来实现，也不想处理任何关于ListPopupWindow的细节。我们关心的只有Spinner的初始化、适配数据、Item选择事件（ItemClick事件），如果可以，就再加上Spinner的点击事件（Click或Touch事件）、自由控制Spinner的显示时机。</p>
<p>那有没有简单易用的方法，可以直接像使用系统的Spinner一样，来使用EditText和ListPopupWindow的组合呢？并且可以提供Spinner的点击事件？答案是肯定的，详情且看下一节。</p>
<h1 id="三、自定义组合控件"><a href="#三、自定义组合控件" class="headerlink" title="三、自定义组合控件"></a>三、自定义组合控件</h1><p>在第二部分我们可以看出，我们的控件要满足以下两大功能：</p>
<ol>
<li>像系统Spinner一样简单易用：初始化、适配数据、Item选择事件（ItemClick事件）</li>
<li>支持点击事件（Click或Touch事件），自由控制下拉框显示时机</li>
</ol>
<p>由于控件源码稍长，就不贴出来了，有兴趣可以点击文末的Github链接，源码也比较简单，只是进行控件的组合，并提供相应的方法进行调用，下面主要介绍下使用方法。</p>
<h2 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1. 引入依赖"></a>1. 引入依赖</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">    compile <span class="string">'com.sherlockshi.widget:sherlockspinner:1.0.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-使用方法"><a href="#2-使用方法" class="headerlink" title="2. 使用方法"></a>2. 使用方法</h2><h3 id="2-1-像使用系统Spinner一样，在XML文件中使用"><a href="#2-1-像使用系统Spinner一样，在XML文件中使用" class="headerlink" title="2.1 像使用系统Spinner一样，在XML文件中使用:"></a>2.1 像使用系统Spinner一样，在XML文件中使用:</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.sherlockshi.widget.SherlockSpinner</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/sherlock_spinner"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">    <span class="attr">app:lineColor</span>=<span class="string">"#00FF00"</span></span><br><span class="line">    <span class="attr">android:hint</span>=<span class="string">"Please Select..."</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>SherlockSpinner有以下属性:<br><code>lineColor</code>: 设置底部横线的颜色<br>同时支持使用代码进行配置：mSherlockSpinner.setLineColor(0x00FF00);</p>
<blockquote>
<p>由于SherlockSpinner继承自<code>EditText</code>, 所以你可以使用EditText的其它属性，例如<code>gravity</code>、<code>textSize</code>、<code>textColor</code>…</p>
</blockquote>
<h3 id="2-2-还是像使用系统Spinner一样，在代码中设置Adapter和ItemClickListener"><a href="#2-2-还是像使用系统Spinner一样，在代码中设置Adapter和ItemClickListener" class="headerlink" title="2.2 还是像使用系统Spinner一样，在代码中设置Adapter和ItemClickListener:"></a>2.2 还是像使用系统Spinner一样，在代码中设置<code>Adapter</code>和<code>ItemClickListener</code>:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mSherlockSpinner = (SherlockSpinner) findViewById(R.id.sherlock_spinner);</span><br><span class="line">ArrayAdapter&lt;String&gt; mAdapterLanguages = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(<span class="keyword">this</span>, android.R.layout.simple_list_item_1, mLanguages);</span><br><span class="line">mSherlockSpinner.setAdapter(mAdapterLanguages);</span><br><span class="line">mSherlockSpinner.setOnItemClickListener(<span class="keyword">new</span> AdapterView.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        showMessage(<span class="string">"Select "</span> + mLanguages[position]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>以上，就可以像系统Spinner一样使用SherlockSpinner了，如果没有别的需求，这样也就够用了。如果你有点击请求网络数据，再异步显示下拉框的需求，可以看第3步的使用方法。</p>
<h3 id="2-3-可选-如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理"><a href="#2-3-可选-如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理" class="headerlink" title="2.3 (可选) 如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理"></a>2.3 (可选) 如果你想在异步加载数据后，再显示出更新后的数据，你可以使用它的点击事件来处理</h3><p><code>记住：</code>在获取数据后，你必须手动调用<code>sherlockSpinner.show()</code>方法来显示SherlockSpinner的下拉选项</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mSherlockSpinner.setOnClickListener(<span class="keyword">new</span> SherlockSpinner.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        getDataFromNet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDataFromNet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// after delay 2s, modify the source data, to simulate net request</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            mLanguages[<span class="number">4</span>] = <span class="string">"Javaaaaaaaaaaa"</span>;</span><br><span class="line">            mAdapterLanguages.notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// then you must manually call sherlockSpinner.show()</span></span><br><span class="line">            runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    mSherlockSpinner.show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-更多属性"><a href="#3-更多属性" class="headerlink" title="3. 更多属性"></a>3. 更多属性</h2><ul>
<li>由于SherlockSpinner继承自EditText，所以你可以使用EditText的其它属性，例如<code>gravity</code>、<code>textSize</code>、<code>textColor</code>…</li>
<li>SherlockSpinner还有一个属性，可以设置下拉框的显示位置，即锚点设置：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mSherlockSpinner.setAnchorView(findViewById(R.id.llyt_anchor));</span><br></pre></td></tr></table></figure>
<p>效果如下图中4和5的区别，在第4部分中，下拉框停靠在Spinner上；而第5部分中，下拉框停靠在Spinner所在的整行布局上，宽度更大。</p>
<p><img src="http://7xlpfl.com1.z0.glb.clouddn.com/sherlockshi/2016-11-21-demo8.gif" alt=""></p>
<h1 id="四、其它"><a href="#四、其它" class="headerlink" title="四、其它"></a>四、其它</h1><p>另外，一个小小的Tip：<br>在styles.xml文件中配置以下代码，可使下拉框带上漂亮的分割线：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:dropDownListViewStyle"</span>&gt;</span>@style/mySpinnerStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"mySpinnerStyle"</span> <span class="attr">parent</span>=<span class="string">"android:Widget.ListView.DropDown"</span>&gt;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:divider"</span>&gt;</span>#E0E0E0<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:dividerHeight"</span>&gt;</span>0.1dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>项目代码已共享到Github：<a href="https://github.com/SherlockShi/SherlockSpinner" target="_blank" rel="external">SherlockSpinner</a><br>欢迎fork、star、issue。</p>
<blockquote>
<p>PS：欢迎关注<a href="http://sherlockshi.github.io/">SherlockShi博客</a></p>
</blockquote>

        </div>
        
        <blockquote class="post-copyright">
            <div class="content">
               转载请注明出处：<a href="/2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/" target="_blank" rel="external">http://sherlockshi.github.io/2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/index.html</a>
            </div>
            <footer>
                <a href="http://sherlockshi.github.io">
                    <img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg" alt="SherlockShi">
                    SherlockShi
                </a>
            </footer>
        </blockquote>

        
        <div class="post-reward">
            <a id="rewardBtn" href="javascript:;" class="post-reward-btn waves-effect waves-circle waves-light">赏</a>
        </div>
        

        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spinner/">Spinner</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自定义控件/">自定义控件</a></li></ul>


            
            <div class="post-share-wrap">
                <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

                <a href="javascript:;" id="share-fab" class="post-share-fab waves-effect waves-circle">
                    <i class="icon icon-share-alt icon-lg"></i>
                </a>
            </div>
            

        </div>
    </div>   

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2016/11/12/15_Android/1535_架构/Android MVP架构实践/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Android MVP架构实践</h4>
      </a>
    </div>
  
</nav>


            
    
<div class="duoshuo">
	<div class="ds-thread" data-thread-key="15_Android/1540_Widget/自定义组合控件SherlockSpinner" data-title="Android自定义组合控件：SherlockSpinner" data-url="http://sherlockshi.github.io/2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/"></div>
</div>
<script src="/js/embed.min.js?v=undefined"></script>
<script src="//cdn.bootcss.com/marked/0.3.6/marked.min.js" async="async"></script>
<script>
var duoshuoQuery = {short_name:'sherlockshi', theme: 'none'}
</script>




</article>

<div id="reward" class="reward-lay">
    <a class="reward-off" id="rewardOff" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢大侠慷慨解囊～
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        <li>
            <img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/51725532.jpg" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/44887159.jpg" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>


</div>
  </main>
  <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "Android自定义组合控件：SherlockSpinner",
    pic: "http://7xlpfl.com1.z0.glb.clouddn.com/16-10-1/61240869.jpg",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://sherlockshi.github.io/2016/11/21/15_Android/1540_Widget/自定义组合控件SherlockSpinner/"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>


  <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script src="/js/main.min.js?v=undefined"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=undefined"></script>







<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-85064715-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



</body>
</html>
